<script async src="https://telegram.org/js/telegram-widget.js?11" data-telegram-login="<%= @telegram_login_bot_name %>" data-size="large" data-onauth="onTelegramAuth(user)" data-request-access="write"></script>
<script type="text/javascript">
  function onTelegramAuth(user) {
    alert('Logged in as ' + user.first_name + ' ' + user.last_name + ' (' + user.id + (user.username ? ', @' + user.username : '') + ')');
    // user data is logged to the browser for easy inspection
    console.log(user);
    $.post('/login', JSON.stringify(user), function(response) {
      // Do something with the request
    }, 'json');
  }
</script>